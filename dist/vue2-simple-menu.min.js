var Vue2SimpleMenu=function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e="__v-click-outside",t="undefined"!=typeof window,n="undefined"!=typeof navigator,i=t&&("ontouchstart"in window||n&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function o(t,n){var o=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||i,isActive:!(!1===e.isActive)}}(n.value),r=o.handler,s=o.middleware;o.isActive&&(t[e]=o.events.map((function(e){return{event:e,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,o=e.middleware;n.target!==t&&!t.contains(n.target)&&o(n,t)&&i(n,t)}({event:e,el:t,handler:r,middleware:s})}}})),t[e].forEach((function(e){var t=e.event,n=e.handler;return setTimeout((function(){return document.documentElement.addEventListener(t,n,!1)}),0)})))}function r(t){(t[e]||[]).forEach((function(e){return document.documentElement.removeEventListener(e.event,e.handler,!1)})),delete t[e]}var s={bind:o,update:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(r(e),o(e,{value:n}))},unbind:r};return{install:function(e){e.directive("click-outside",s)},directive:s}}()}));function i(e,t,n,i,o,r,s,u,l,d){"boolean"!=typeof s&&(l=u,u=s,s=!1);var a,c="function"==typeof n?n.options:n;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),i&&(c._scopeId=i),r?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=a):t&&(a=s?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,u(e))}),a)if(c.functional){var f=c.render;c.render=function(e,t){return a.call(t),f(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,a):[a]}return n}t.use(n);var o={name:"Vue2SimpleMenu",props:{options:{type:Array,required:!0}},data:function(){return{item:null,menuWidth:null,menuHeight:null,triggerEl:null,triggerOffset:{x:0,y:0}}},methods:{showMenu:function(e,t){this.item=t;var n=this.$refs.simpleContextMenu;if(n){this.menuWidth&&this.menuHeight||(n.style.visibility="hidden",n.style.display="block",this.menuWidth=n.offsetWidth,this.menuHeight=n.offsetHeight,n.removeAttribute("style")),document.addEventListener("scroll",this.onScroll);var i=e.target.getBoundingClientRect(),o=i.top,r=i.left;this.triggerEl=e.target,this.triggerOffset={x:e.pageX-r,y:e.clientY-o},this.updateXY(e.pageX,e.clientY),n.classList.add("vue2-simple-menu--active")}},updateXY:function(e,t){var n=this.$refs.simpleContextMenu;n&&(this.menuWidth+e>=window.innerWidth?n.style.left=e-this.menuWidth+2+"px":n.style.left=e-2+"px",this.menuHeight+t>=window.innerHeight?n.style.top=t-this.menuHeight+2+"px":n.style.top=t-2+"px")},hideContextMenu:function(){document.removeEventListener("scroll",this.onScroll);var e=this.$refs.simpleContextMenu;e&&e.classList.remove("vue2-simple-menu--active")},onClickOutside:function(){this.hideContextMenu()},optionClicked:function(e){this.hideContextMenu(),this.$emit("option-clicked",{item:this.item,option:e})},onEscKeyRelease:function(e){27===e.keyCode&&this.hideContextMenu()},onScroll:function(e){if(this.triggerEl){var t=this.triggerEl.getBoundingClientRect(),n=t.top,i=t.left;this.updateXY(i+this.triggerOffset.x,n+this.triggerOffset.y)}}},mounted:function(){document.body.addEventListener("keyup",this.onEscKeyRelease)},beforeDestroy:function(){document.removeEventListener("keyup",this.onEscKeyRelease),document.removeEventListener("scroll",this.onScroll)}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"simpleContextMenu",staticClass:"vue2-simple-menu"},e._l(e.options,(function(t,i){return n("li",{key:i,staticClass:"vue2-simple-menu__item",class:[t.class,"divider"===t.type?"vue2-simple-menu__divider":""],on:{click:function(n){return n.stopPropagation(),e.optionClicked(t)}}},[n("span",{domProps:{innerHTML:e._s(t.name)}})])})),0)])};r._withStripped=!0;var s=i({render:r,staticRenderFns:[]},void 0,o,void 0,!1,void 0,!1,void 0,void 0,void 0);function u(e){u.installed||(u.installed=!0,e.component("Vue2SimpleMenu",s))}var l={install:u},d=null;return"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use(l),e.default=s,e.install=u,e}({},Vue);
